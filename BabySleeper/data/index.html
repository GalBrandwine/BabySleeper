<!DOCTYPE HTML><html>
<!-- Rui Santos - Complete project details at https://RandomNerdTutorials.com

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files.
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software. -->
<head>
  <title>BabySleeper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" type="text/css" href="style.css"> <!-- Tells the html that we are using css. -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">
  <script src="https://code.highcharts.com/highcharts.js"></script>

  <!-- Moved to CSS
  <style>
    body {
      min-width: 310px;
    	max-width: 800px;
    	height: 400px;
      margin: 0 auto;
    }
    h2 {
      font-family: Arial;
      font-size: 2.5rem;
      text-align: center;
    }
  </style>
  -->
</head>
<body>
  
  <h2>BabySleeper</h2>
  <h3>With love, Gal.</h3>
<!-- TEMPERATURE -->
	<div class="data"> 
		<div class="side-by-side temperature-icon">
			<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="9.915px" height="22px" viewBox="0 0 9.915 22" enable-background="new 0 0 9.915 22" xml:space="preserve"><path fill="#FFFFFF" d="M3.498,0.53c0.377-0.331,0.877-0.501,1.374-0.527C5.697-0.04,6.522,0.421,6.924,1.142,
			c0.237,0.399,0.315,0.871,0.311,1.33C7.229,5.856,7.245,9.24,7.227,12.625c1.019,0.539,1.855,1.424,2.301,2.491,
			c0.491,1.163,0.518,2.514,0.062,3.693c-0.414,1.102-1.24,2.038-2.276,2.594c-1.056,0.583-2.331,0.743-3.501,0.463,
			c-1.417-0.323-2.659-1.314-3.3-2.617C0.014,18.26-0.115,17.104,0.1,16.022c0.296-1.443,1.274-2.717,2.58-3.394,
			c0.013-3.44,0-6.881,0.007-10.322C2.674,1.634,2.974,0.955,3.498,0.53z"/>
			</svg>
		</div>

		<div class="side-by-side temperature-text">Temperature</div>
		<div class="side-by-side temperature" ><span id="temperature">%TEMPERATURE%</span><span class="superscript">Â°C</span></div>
	</div>

<!-- HUMIDITY -->
	<div class="data">
		<div class="side-by-side humidity-icon">
			<svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="17.955px" viewBox="0 0 13 17.955" enable-background="new 0 0 13 17.955" xml:space="preserve">
			<path fill="#FFFFFF" d="M1.819,6.217C3.139,4.064,6.5,0,6.5,0s3.363,4.064,4.681,6.217c1.793,2.926,2.133,5.05,1.571,7.057 c-0.438,1.574-2.264,4.681-6.252,4.681c-3.988,0-5.813-3.107-6.252-4.681C-0.313,11.267,0.026,9.143,1.819,6.217"></path>
			</svg>
		</div>

		<div class="side-by-side humidity-text">Humidity</div>
		<div class="side-by-side humidity" ><span id="humidity">%HUMIDITY%</span><span class="superscript">&#37;</span></div>
	</div>
</div>
<!-- GAS -->
  <div class="data">
	  <div class="side-by-side gas-icon">
		<svg  version="1.1" id="Layer_3" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" x="0px" y="0px" width="10px" height="27px" viewBox="0 0 10 27" enable-background="new 0 0 10 27" xml:space="preserve">>
		 <!-- Created with SVG-edit - https://github.com/SVG-Edit/svgedit-->
			 
			  <title>Layer 1</title>
  			  <ellipse cx="14.78127" cy="10.51525" fill="#ffffff" id="svg_1" rx="2.92156" ry="8.18036" stroke="#000000" stroke-width="0" transform="translate(-9.79637 -2.25647)"/>
  			  <circle cx="14.8973" cy="24.69263" fill="#ffffff" id="svg_3" r="3.98184" stroke="#000000" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="0" transform="translate(-9.79637 -2.25647)"/>
			 
		</svg>
	  </div>
      
	  <div class="side-by-side gas-text">Gas</div>
	  <div class="side-by-side gas" ><span id="gas"><placeholder="GAS">%GAS%</span><span class="superscript">ppm</span></div>
  </div>


  <div class="data">
	<dive class="note">
		Gas levels should be below <span style="color:red;font-weight:bold">300</span> ppm.
		IF levels indicate more than 300,
		than on (or more) of the bollowing gasses are in high concentration: <span style="font-weight:bold">CO, LPG (coocking gas), Butane, Propane, Methane, Alcohol, Hydrogen</span>.
		
    </div>
  </div>

  <!-- Use the buttons for recording the remote commands 
  <p><a href="/on"><button class="button">ON</button></a></p>
  <p><a href="/off"><button class="button button2">OFF</button></a></p>
  -->
  
   <!--
   <div class="slidecontainer">
  	 <p>Led collor picker:</p>
  	 <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
  	 <p>Value: <span id="demo"></span></p>
   </div>
   -->
  

  <div class="data">
    <div class="note">


	    <div class="slidecontainer">
	  	 	<div class="ledseting_text"><p>Brightness:</p></div>	
	  	  	<input type="range" min="8" max="200" value="20" class="slider" id="brightnessRange">
	    </div>
		<div class="data">
	  	   	<div class="side-by-side ledseting_text"><p>Led color: </p></div>
		   	<div class="side-by-side ledseting_text"><input type="color" name="favcolor" value="#ff0000" id="hexRGB"></div>
		   	<div class="side-by-side ledseting_text"><p>RGB value: <span id="hexvalue">%HEXVALUE%</span></p></div>
		</div>
		<div class="data" id="blueLightButtons">
			<div class="side-by-side "><p><a href="/bluelightON"><button class="button button1">Bluelight ON</button></a></p></div>
			<div class="side-by-side bluelight"><p><id="nightlightLabel"><placeholder="NIGHTLIGHT">%BLUELIGHT%</p></div>
			<div class="side-by-side "><p><a href="/bluelightOFF"><button class="button button2">Bluelight OFF</button></a></p></div>
		</div>

		<input type="checkbox" name="effect1" value="0" id="effect_breathing" onclick='handleClick(this);' checked> Breathing<br>
		<input type="checkbox" name="effect2" value="1" id="effect_spiral" onclick='handleClick(this);'> Spiral <br>

	</div>
  </div>
  
  
  <div class="data">
    <div class="wifi_cardentials">

		<div class="data">
			<div class="side-by-side">Wifi connected: </div>
			<div class="side-by-side"><p><id="wifiStatus">%WIFISTATUS%</p></div>
	   </div>
		<form action="/wifiCardentials" method="get">
			<div class="data">
		  	 <div class="side-by-side ">WIFI name: </div>
		  	 <div class="side-by-side "><input type="text" name="ssid"></div>
			</div>
			<div class="data">
		  	 <div class="side-by-side ">WIFI password: </div>
		  	 <div class="side-by-side "><input type="password" name="psw"></div>
			</div>
			 <br><br>
			 <input type="submit" button class="button button2"></button>
		</form>


	</div>
  </div>


</body>


<script>

/* Theck & uncheck effects */
var effect_breathing = document.getElementById("effect_breathing");
var effect_spiral = document.getElementById("effect_spiral");

function handleClick(cb) {
	if (cb == effect_breathing){
		effect_spiral.checked = false;
	}
	if (cb == effect_spiral){
		effect_breathing.checked = false;
	}

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) { // there's no return for this one. Yes I know it is not protocol -- 'leave me in your mother'..
      //document.getElementById("temperature").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/ledeffect"+"?effectNum="  + cb.value, true);
  xhttp.send();
}

/* color picker settings */
var ledCollorLabel = document.getElementById("hexvalue")	// label that holds the last rgb stored in esp32 memory.
var hex = document.getElementById("hexRGB");
var slider = document.getElementById("brightnessRange");


slider.oninput = function() { // If slider changed - send serve request with current slider value.
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) { // there's no return for this one. Yes I know it is not protocol -- 'leave me in your mother'..
      //document.getElementById("temperature").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/brightness"+"?brightnessValue="  + this.value, true);
  xhttp.send();
}

/*
Here im doing a nice trik - im storing the hex value from color picker in label, and in ESP32 preferences, so it is recoverable in the next restart.
Than - when server is on, im setting the colorPicker to be the last picked value using the stored value in Preferences in ESP32 memory.
*/
hex.value = ledCollorLabel.innerHTML;
var tempVal;
hex.oninput = function() {  
  tempVal = this.value;
  ledCollorLabel.innerHTML =tempVal;

}


setInterval(function ( ) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      //document.getElementById("temperature").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/hexFromFevcolor"+"?hexRGB="  + ledCollorLabel.innerHTML.slice(1), true);
  xhttp.send();
}, 5000 ) ;



setInterval(function ( ) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("temperature").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/temperature", true);
  xhttp.send();
}, 1000 ) ;

setInterval(function ( ) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("humidity").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/humidity", true);
  xhttp.send();
}, 1000 ) ;

setInterval(function ( ) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("gas").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/gas", true);
  xhttp.send();
}, 1000 ) ;

/*
setInterval(function ( ) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("smoke").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/smoke", true);
  xhttp.send();
}, 10000 ) ;

setInterval(function ( ) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("co").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "/co", true);
  xhttp.send();
}, 10000 ) ;
*/
</script>
</html>
